# 统一容器版本 - 避免容器间网络问题
# 使用方法: docker compose -f docker-compose.unified.yml up -d --build

services:
  ip-cam-streamer:
    build:
      context: .
      dockerfile: Dockerfile.unified
    container_name: ip-cam-streamer
    restart: unless-stopped
    ports:
      - "${WEB_PORT:-3000}:80" # Web UI
      - "8554:8554" # RTSP
      - "8889:8889" # WebRTC (WHEP)
      - "8888:8888" # HLS (MediaMTX)
      - "8189:8189/udp" # WebRTC ICE/STUN
    volumes:
      - hls-data:/var/hls
    environment:
      - TZ=Asia/Shanghai

volumes:
  hls-data:
