# 精简版统一容器 - 无 Nginx
# 使用方法: docker compose -f docker-compose.simple.yml up -d --build

services:
  ip-cam-streamer:
    build:
      context: .
      dockerfile: Dockerfile.simple
    container_name: ip-cam-streamer-simple
    restart: unless-stopped
    ports:
      - "${WEB_PORT:-3000}:3000" # Web UI + API (Node.js)
      - "8554:8554" # RTSP
      - "8889:8889" # WebRTC (WHEP) - 直接暴露
      - "8888:8888" # HLS (MediaMTX)
      - "8189:8189/udp" # WebRTC ICE/STUN
    volumes:
      - hls-data:/var/hls
    environment:
      - TZ=Asia/Shanghai

volumes:
  hls-data:
